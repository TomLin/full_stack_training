<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DemoJSON</title>
    <style>
        body {
            font-size: 17px;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #fff;
        }

        header {
            background-color: black;
            color: yellow;

            /* 內距 */
            padding: 20px;

            /* 文字置中 */
            text-align: center;
        }

        .container {
            /* 會依照父元素(假設是100px)就會設成 90px */
            width: 90%;
            margin: auto;
            padding: 10px;
            border: 1px solid red;
        }
    </style>
</head>

<body>
    <header>
        <h1>Demo - JSON</h1>
    </header>
    <div class="container"></div>
    <script>
        // javascript 程式碼寫在這裡
        /*
            JSON (JavaScript Object Notation)
            1. 物件的文字表示法
            2. 資料交換格式
            3. JSON 格式與 JavaScript 物件的差異
                a. JSON 的 key 必須要用"雙引號"包起來
                b. JSON 不支援函式(function)
            4. JSON.parse() : 將 JSON 格式的字串轉換成 JavaScript 物件
                string, number, boolean, object, array
                都會被轉換成對應的 JavaScript 資料型態
            5. JSON.stringify() : 將 JavaScript 物件轉換成 JSON 格式的字串
        */

        let json1 = `{
                    "name": "Madame Uppercut",
                    "age": 39,
                    "bool":true,
                    "secretIdentity": "Jane Wilson",
                    "powers": [
                    "Million tonne punch",
                    "Damage resistance",
                    "Superhuman reflexes"
                    ]
                    }`;

        // JSON.parse() 變成 javascript 物件
        let obj1 = JSON.parse(json1);

        console.log(obj1);
        console.log(obj1.name);
        console.log(obj1.powers[1]);

        // 操作
        obj1.name = "gary";
        obj1.bool = false;
        obj1.powers[obj1.powers.length] = "C#";

        // JSON.stringify() 變成 JSON 字串
        let json2 = JSON.stringify(obj1);
        console.log(json2);

        // 以陣列格式來儲存JSON物件
        let json3 = `[{
                "name": "Molecule Man",
                "age": 29,
                "secretIdentity": "Dan Jukes",
                "powers": ["Radiation resistance", "Turning tiny", "Radiation blast"]
                },
                {
                "name": "Madame Uppercut",
                "age": 39,
                "secretIdentity": "Jane Wilson",
                "powers": ["Million tonne punch","Damage resistance",
                "Superhuman reflexes"]
                }]`;

        let obj2 = JSON.parse(json3);
        console.log(obj2);
        console.log(obj2[1].name);
        console.log(obj2[1].powers[2]);

        // 解構賦值
        // 複製
        let arr = ['a', 'b', 'c'];
        let arrcopy = [...arr]; // shallow copy
        console.log(arr);
        console.log(arrcopy);
        console.log(arr === arrcopy); // false 兩者的記憶體位置不同

        //  淺層複製
        let arr2 = [{ name: 'gary', age: 18 }, 'a', 'b', 'c', [1, 2, 3]];
        // 用 destructuring assignment, 會是淺層複製
        let arr2copy = [...arr2];
        console.log(arr2)
        console.log(arr2copy)
        console.log('-----------------------------')
        arr2copy[0].name = 'jerry';  // 如果淺層複製裡面的是物件，修改物件的屬性會影響到原本的物件 
        arr2copy[1] = 'z';  // 如果是基本型態的值被修改，則不會影響到原本的陣列
        // arr2copy[4][0] = 9; // 如果是陣列裡面的元素被修改，會影響到原本的陣列
        arr2copy[4] = [9, 8, 7]; // 如果是整個陣列指派新的陣列，則不會影響到原本的陣列
        console.log(arr2);
        console.log(arr2copy);
        console.log('-----------------------------2')

        // 深層複製
        let arr3 = [{ name: 'gary1', age: 18 }, 'a', 'b', 'c']
        // 先將 arr3 轉成 JSON 字串，再將 JSON 字串轉回物件，達到深層複製的效果
        let arr3copy = JSON.parse(JSON.stringify(arr3));
        console.log(arr3);
        console.log(arr3copy);
        console.log('-----------------------------3')
        arr3copy[0].name = 'jerry1';
        console.log(arr3);
        console.log(arr3copy);


    </script>
</body>

</html>