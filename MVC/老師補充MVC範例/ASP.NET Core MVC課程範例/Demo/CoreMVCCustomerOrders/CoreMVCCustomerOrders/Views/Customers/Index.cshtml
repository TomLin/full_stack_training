@model CoreMVCCustomerOrders.Models.Customer

<div class="container">
    <h3 class="mb-3 text-center">客戶訂單</h3>
    <div class="mb-3">
        <label class="form-label">公司:</label>
        <select asp-for="CustomerId" class="form-control" asp-items="@ViewBag.Customers">
            <option>--請選擇--</option>
        </select>
    </div>
    <div class="mb-3">
        <div id="Orders"></div>
    </div>
</div>

@section Scripts {
    <script>
        $("#CustomerId").bind("change", function() {
            if (CustomerId.value != '--請選擇--'){
              updateOrders();
            }
            else{
                $("#Orders").html("");
            }
        });
        function updateOrders() {
          $.ajax({
            type: "GET",
            url: "@Url.Action("Orders", "Customers")/" + CustomerId.value,
          }).done(function (result) {
            $("#Orders").html(result);
          }).fail(function (e) {
            alert(e.statusText);
          });
        }
    </script>
}
